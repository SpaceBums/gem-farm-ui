(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{45301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(76045)}])},76045:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Se}});var r=n(39977),a=n(80795),i=n(67294);function o(e){var t=e.className,n=void 0===t?"":t;return(0,r.BX)("svg",{sx:{stroke:"text"},className:n,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[(0,r.tZ)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,r.tZ)("circle",{cx:"12",cy:"12",r:"9"}),(0,r.tZ)("path",{d:"M8 12L8 12.01"}),(0,r.tZ)("path",{d:"M12 12L12 12.01"}),(0,r.tZ)("path",{d:"M16 12L16 12.01"})]})}function c(e){var t=e.className,n=void 0===t?"":t;return(0,r.BX)("svg",{className:n,sx:{stroke:"text"},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"#2c3e50",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[(0,r.tZ)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,r.tZ)("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37 1 .608 2.296.07 2.572-1.065z"}),(0,r.tZ)("circle",{cx:"12",cy:"12",r:"3"})]})}var u=function(){return(0,r.BX)("svg",{sx:{stroke:"text"},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[(0,r.tZ)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,r.tZ)("path",{d:"M18 6L6 18"}),(0,r.tZ)("path",{d:"M6 6L18 18"})]})},l=function(){return(0,r.BX)("svg",{sx:{stroke:"text"},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[(0,r.tZ)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,r.tZ)("path",{d:"M4 6L20 6"}),(0,r.tZ)("path",{d:"M4 12L20 12"}),(0,r.tZ)("path",{d:"M4 18L20 18"})]})};var s=function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};(0,i.useEffect)((function(){return document.addEventListener("mousedown",n),document.addEventListener("keypress",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("keypress",n)}}))},f=function(e){var t=e.item,n=e.additionalOptions,c=void 0===n?null:n,u=e.className,l=e.onClick,f=(0,i.useState)(!1),d=f[0],p=f[1],h=(0,i.useRef)(null);s(h,(function(){return p(!1)}));if(!t)return null;var m,v=t.onchainMetadata,w=t.externalMetadata;return(0,r.BX)(a.kC,{tabIndex:1,ref:h,sx:{flexDirection:"column",position:"relative",transition:"all .125s linear",outline:"none",cursor:l?"pointer":"auto","&:hover, &:focus, > .toggle-menu:focus":{"> .toggle-menu":{visibility:"visible",opacity:1},"> img":{opacity:.7}}},className:u,onClick:(m=t,function(){return!l||l(m)}),onKeyDown:function(e){return function(t){return l&&13==t.keyCode&&l(e),!0}}(t),children:[(0,r.tZ)(a.zx,{tabIndex:1,variant:"resetted",className:"toggle-menu",onClick:function(){p((function(e){return!e}))},sx:{display:"flex",position:"absolute",visibility:d?"visible":"hidden",opacity:d?1:0,right:".8rem",top:".8rem",zIndex:1,transition:"all .125s linear","&:hover, &:focus":{visibility:"visible",cursor:"pointer",opacity:1}},children:(0,r.tZ)(o,{sx:{width:"3.2rem",height:"3.2rem",stroke:"heading",strokeWidth:"2"}})}),(0,r.BX)(a.kC,{sx:{position:"absolute",visibility:d?"visible":"hidden",opacity:d?1:0,flexDirection:"column",alignItems:"flex-start",padding:"2.4rem 1.2rem",top:40,right:0,backgroundColor:"background",transition:"all .125s linear",boxShadow:"0px 4px 4px rgba(0,0,0,0.25)",gap:".8rem",zIndex:2,fontSize:"1.2rem",a:{whiteSpace:"nowrap"}},children:[(0,r.tZ)("a",{href:v.data.uri,rel:"noopener noreferrer",target:"_blank",tabIndex:1,children:"View raw JSON"}),(0,r.tZ)("a",{href:w.image,rel:"noopener noreferrer",target:"_blank",tabIndex:1,children:"View image"}),c||null]}),(0,r.tZ)("img",{sx:{borderRadius:".4rem",transition:"all .125s linear",opacity:d?.7:1},src:w.image}),(0,r.tZ)(a.xv,{variant:"small",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",padding:"0 .8rem",mt:".8rem"},children:w.name})]})},d=n(34051),p=n.n(d),h=n(38676),m=n(96938),v=n(94758),w=n(59917),x=n(43029),b=n(9669),g=n.n(b),y=n(49476);function k(e,t,n,r,a,i,o){try{var c=e[i](o),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){k(i,r,a,o,c,"next",e)}function c(e){k(i,r,a,o,c,"throw",e)}o(void 0)}))}}var S=y.O2.metadata.Metadata;function C(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=B(p().mark((function e(t,n,r){var a,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getPDA(t);case 3:return a=e.sent,e.next=6,S.load(n,a);case 6:return i=e.sent.data,e.next=9,g().get(i.data.uri);case 9:return o=e.sent.data,e.abrupt("return",{pubkey:r?new w.PublicKey(r):void 0,mint:new w.PublicKey(t),onchainMetadata:i,externalMetadata:o});case 13:e.prev=13,e.t0=e.catch(0),console.log("failed to pull metadata for token ".concat(t));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function K(e,t){return P.apply(this,arguments)}function P(){return(P=B(p().mark((function e(t,n){var r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.forEach((function(e){return r.push(C(e.mint,n,e.pubkey))})),e.next=4,Promise.all(r);case 4:return a=e.sent.filter((function(e){return!!e})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return W.apply(this,arguments)}function W(){return(W=B(p().mark((function e(t,n){var r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getParsedTokenAccountsByOwner(t,{programId:x.TOKEN_PROGRAM_ID});case 2:return r=e.sent,a=r.value.filter((function(e){var t=e.account.data.parsed.info.tokenAmount;return 0===t.decimals&&1===t.uiAmount})).map((function(e){return{pubkey:e.pubkey,mint:e.account.data.parsed.info.mint}})),e.next=6,K(a,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n,r,a,i,o){try{var c=e[i](o),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){A(i,r,a,o,c,"next",e)}function c(e){A(i,r,a,o,c,"throw",e)}o(void 0)}))}}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,m.Rc)().connection,n=(0,m.Os)().publicKey,r=(0,i.useState)(null),a=r[0],o=r[1],c=(0,i.useCallback)(N(p().mark((function r(){var a,i;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O(n,t);case 2:a=r.sent,i=e?a.filter((function(t){var n,r,a;return null===(n=t.onchainMetadata)||void 0===n||null===(r=n.data)||void 0===r||null===(a=r.creators)||void 0===a?void 0:a.find((function(t){return-1!==e.indexOf(t.address)}))})):a,o(i);case 5:case"end":return r.stop()}}),r)}))),[t,n]);return(0,i.useEffect)((function(){n&&c()}),[n]),{walletNFTs:a,fetchNFTs:c}},M=n(88138);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,a,i,o){try{var c=e[i](o),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){j(i,r,a,o,c,"next",e)}function c(e){j(i,r,a,o,c,"throw",e)}o(void 0)}))}}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function R(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){c=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var a=z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}function X(){var e=w.Keypair.fromSecretKey(Uint8Array.from([208,175,150,242,88,34,108,88,177,16,168,75,115,181,199,242,120,4,78,75,19,227,13,215,184,108,226,53,111,149,179,84,137,121,79,1,160,223,124,241,202,203,220,237,50,242,57,158,226,207,203,188,43,28,70,110,214,234,251,15,249,157,62,80]));return new y.iH(e)}function L(e,t){return H.apply(this,arguments)}function H(){return(H=T(p().mark((function e(t,n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==n&&void 0!==n?n:X(),e.abrupt("return",new V(t,r,M.x));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(n,e);var t=G(n);function n(e,r,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e,r,a,h.GEM_BANK_PROG_ID)}var r=n.prototype;return r.initBankWallet=function(){var e=this;return T(p().mark((function t(){var n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=w.Keypair.generate(),t.next=3,e.initBank(n,e.wallet.publicKey,e.wallet.publicKey);case 3:return r=t.sent,t.abrupt("return",{bank:n,txSig:r});case 5:case"end":return t.stop()}}),t)})))()},r.initVaultWallet=function(e){var t=this;return T(p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.initVault(e,t.wallet.publicKey,t.wallet.publicKey,t.wallet.publicKey,"test_vault"));case 1:case"end":return n.stop()}}),n)})))()},r.setVaultLockWallet=function(e,t,n){var r=this;return T(p().mark((function a(){return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",r.setVaultLock(e,t,r.wallet.publicKey,n));case 1:case"end":return a.stop()}}),a)})))()},r.depositGemWallet=function(e,t,n,r,a,i){var o=this;return T(p().mark((function c(){var u,l,s,f,d;return p().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=E,c.next=3,(0,h.findWhitelistProofPDA)(e,r);case 3:return c.t1=c.sent,u=(0,c.t0)(c.t1,2),l=u[0],u[1],c.t2=E,c.next=10,(0,h.findWhitelistProofPDA)(e,i);case 10:return c.t3=c.sent,s=(0,c.t2)(c.t3,2),f=s[0],s[1],c.next=16,y.O2.metadata.Metadata.getPDA(r);case 16:return d=c.sent,c.abrupt("return",o.depositGem(e,t,o.wallet.publicKey,n,r,a,l,d,f));case 18:case"end":return c.stop()}}),c)})))()},r.withdrawGemWallet=function(e,t,n,r){var a=this;return T(p().mark((function i(){return p().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",a.withdrawGem(e,t,a.wallet.publicKey,n,r,a.wallet.publicKey));case 1:case"end":return i.stop()}}),i)})))()},r.addToWhitelistWallet=function(e,t,n){var r=this;return T(p().mark((function a(){return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",r.addToWhitelist(e,r.wallet.publicKey,t,n));case 1:case"end":return a.stop()}}),a)})))()},r.removeFromWhitelistWallet=function(e,t){var n=this;return T(p().mark((function r(){return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.removeFromWhitelist(e,n.wallet.publicKey,t));case 1:case"end":return r.stop()}}),r)})))()},n}(h.GemBankClient),U=n(3170);function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n,r,a,i,o){try{var c=e[i](o),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){$(i,r,a,o,c,"next",e)}function c(e){$(i,r,a,o,c,"throw",e)}o(void 0)}))}}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}function te(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e,t){return ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){c=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ae=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var a=J(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return te(this,n)}}function oe(e,t){return ce.apply(this,arguments)}function ce(){return(ce=q(p().mark((function e(t,n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Initializing gem farm"),r=null!==n&&void 0!==n?n:X(),e.abrupt("return",new ue(t,r,U.x,M.x));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(n,e);var t=ie(n);function n(e,r,a,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e,r,a,h.GEM_FARM_PROG_ID,i,h.GEM_BANK_PROG_ID)}var r=n.prototype;return r.initFarmWallet=function(e,t,n,r,a){var i=this;return q(p().mark((function o(){var c,u,l;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=w.Keypair.generate(),u=w.Keypair.generate(),o.next=4,i.initFarm(c,i.wallet.publicKey,i.wallet.publicKey,u,e,t,n,r,a);case 4:return l=o.sent,console.log("new farm started!",c.publicKey.toBase58()),console.log("bank is:",u.publicKey.toBase58()),o.abrupt("return",ee({farm:c,bank:u},l));case 8:case"end":return o.stop()}}),o)})))()},r.updateFarmWallet=function(e,t,n){var r=this;return q(p().mark((function a(){var i;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.updateFarm(e,r.wallet.publicKey,t,n);case 2:return i=a.sent,console.log("updated the farm"),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},r.authorizeFunderWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.authorizeFunder(e,n.wallet.publicKey,t);case 2:return a=r.sent,console.log("authorized funder",t.toBase58()),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},r.deauthorizeFunderWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.deauthorizeFunder(e,n.wallet.publicKey,t);case 2:return a=r.sent,console.log("DEauthorized funder",t.toBase58()),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},r.fundVariableRewardWallet=function(e,t,n,r){var a=this;return q(p().mark((function i(){var o,c,u;return p().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.findATA(t,a.wallet.publicKey);case 2:return o=i.sent,c={amount:new v.BN(n),durationSec:new v.BN(r)},u=a.fundReward(e,t,a.wallet.publicKey,o,c),console.log("funded variable reward with mint:",t.toBase58()),i.abrupt("return",u);case 7:case"end":return i.stop()}}),i)})))()},r.fundFixedRewardWallet=function(e,t,n,r,a,i,o,c,u,l,s,f){var d=this;return q(p().mark((function h(){var m,w,x;return p().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,d.findATA(t,d.wallet.publicKey);case 2:return m=p.sent,w={schedule:{baseRate:new v.BN(a),tier1:o?{rewardRate:new v.BN(o),requiredTenure:new v.BN(c)}:null,tier2:u?{rewardRate:new v.BN(u),requiredTenure:new v.BN(l)}:null,tier3:s?{rewardRate:new v.BN(s),requiredTenure:new v.BN(f)}:null,denominator:new v.BN(i)},amount:new v.BN(n),durationSec:new v.BN(r)},p.next=6,d.fundReward(e,t,d.wallet.publicKey,m,void 0,w);case 6:return x=p.sent,console.log("funded fixed reward with mint:",t.toBase58()),p.abrupt("return",x);case 9:case"end":return p.stop()}}),h)})))()},r.cancelRewardWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.cancelReward(e,n.wallet.publicKey,t,n.wallet.publicKey);case 2:return a=r.sent,console.log("cancelled reward",t.toBase58()),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},r.lockRewardWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.lockReward(e,n.wallet.publicKey,t);case 2:return a=r.sent,console.log("locked reward",t.toBase58()),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},r.refreshFarmerWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.refreshFarmer(e,t);case 2:return a=r.sent,console.log("refreshed farmer",t.toBase58()),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},r.treasuryPayoutWallet=function(e,t,n){var r=this;return q(p().mark((function a(){var i;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.payoutFromTreasury(e,r.wallet.publicKey,t,new v.BN(n));case 2:return i=a.sent,console.log("paid out from treasury",n),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},r.initFarmerWallet=function(e){var t=this;return q(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.initFarmer(e,t.wallet.publicKey,t.wallet.publicKey);case 2:return r=n.sent,console.log("initialized new farmer",t.wallet.publicKey.toBase58()),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},r.stakeWallet=function(e){var t=this;return q(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.stake(e,t.wallet.publicKey);case 2:return r=n.sent,console.log("begun staking for farmer",t.wallet.publicKey.toBase58()),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},r.unstakeWallet=function(e){var t=this;return q(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.unstake(e,t.wallet.publicKey);case 2:return r=n.sent,console.log("ended staking for farmer",t.wallet.publicKey.toBase58()),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},r.claimWallet=function(e,t,n){var r=this;return q(p().mark((function a(){var i;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.claim(e,r.wallet.publicKey,t,n);case 2:return i=a.sent,console.log("claimed rewards for farmer",r.wallet.publicKey.toBase58()),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},r.flashDepositWallet=function(e,t,n,r,a){var i=this;return q(p().mark((function o(){var c,u,l,s,f,d,m,w;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.fetchFarmAcc(e);case 2:return c=o.sent,u=c.bank,o.t0=re,o.next=7,(0,h.findWhitelistProofPDA)(u,n);case 7:return o.t1=o.sent,l=(0,o.t0)(o.t1,2),s=l[0],l[1],o.t2=re,o.next=14,(0,h.findWhitelistProofPDA)(u,a);case 14:return o.t3=o.sent,f=(0,o.t2)(o.t3,2),d=f[0],f[1],o.next=20,y.O2.metadata.Metadata.getPDA(n);case 20:return m=o.sent,o.next=23,i.flashDeposit(e,i.wallet.publicKey,new v.BN(t),n,r,s,m,d);case 23:return w=o.sent,console.log("added extra gem for farmer",i.wallet.publicKey.toBase58()),o.abrupt("return",w);case 26:case"end":return o.stop()}}),o)})))()},r.addToBankWhitelistWallet=function(e,t,n){var r=this;return q(p().mark((function a(){var i;return p().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.addToBankWhitelist(e,r.wallet.publicKey,t,n);case 2:return i=a.sent,console.log("".concat(t.toBase58()," added to whitelist")),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},r.removeFromBankWhitelistWallet=function(e,t){var n=this;return q(p().mark((function r(){var a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.removeFromBankWhitelist(e,n.wallet.publicKey,t);case 2:return a=r.sent,console.log("".concat(t.toBase58()," removed from whitelist")),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})))()},n}(h.GemFarmClient);function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n,r,a,i,o){try{var c=e[i](o),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,a)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){se(i,r,a,o,c,"next",e)}function c(e){se(i,r,a,o,c,"throw",e)}o(void 0)}))}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){c=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe=function(e){var t=(0,m.Rc)().connection,n=(0,m.zs)(),r=I(),a=r.walletNFTs,o=r.fetchNFTs,c=(0,i.useState)(null),u=c[0],l=c[1],s=(0,i.useState)(null),f=s[0],d=s[1],x=(0,i.useState)(null),b=x[0],g=x[1],y=(0,i.useState)(null),k=y[0],B=y[1],S=(0,i.useState)(null),C=S[0],Z=S[1],P=(0,i.useState)([]),O=P[0],W=P[1],A=(0,i.useState)([]),N=A[0],M=A[1],F=(0,i.useState)(null),j=F[0],T=F[1],z=(0,i.useState)(null),R=z[0],_=z[1],E=(0,i.useState)(""),D=E[0],G=E[1],X=function(){var r=fe(p().mark((function r(a,i){var o,c,u,l,s;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t&&(null===n||void 0===n?void 0:n.publicKey)&&a&&i)){r.next=35;break}if(console.log("[Staking Hook] Fetching farmer account..."),r.prev=2,e){r.next=5;break}throw"No farm ID has been configured.";case 5:return console.log("About to fetch farmer account"),G("Fetching farmer account..."),r.t0=de,r.next=10,(0,h.findFarmerPDA)(new w.PublicKey(e),null===n||void 0===n?void 0:n.publicKey);case 10:return r.t1=r.sent,o=(0,r.t0)(r.t1,1),c=o[0],console.log("got farmer PDA of ".concat(c.toBase58(),". Getting farmer account")),r.next=16,a.fetchFarmerAcc(c);case 16:return u=r.sent,d(u),console.log("Got farmer account. Getting vault account ".concat(u.vault)),r.next=21,i.fetchVaultAcc(u.vault);case 21:l=r.sent,B(l),console.log("Got vault. Getting farmerState"),s=a.parseFarmerState(u),g(s),console.log("Finished all"),G(""),r.next=35;break;case 30:r.prev=30,r.t2=r.catch(2),console.log("ran into error"),console.error(r.t2),d({});case 35:case"end":return r.stop()}}),r,null,[[2,30]])})));return function(e,t){return r.apply(this,arguments)}}();(0,i.useEffect)((function(){fe(p().mark((function r(){var a,i,o;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!(null===n||void 0===n?void 0:n.publicKey)){r.next=33;break}if(r.prev=1,e){r.next=4;break}throw"No farm ID has been configured.";case 4:return console.log("[Staking Hook] Initializing clients..."),console.log("Using forked gem farm ts lib"),r.next=8,L(t,n);case 8:return a=r.sent,console.log("Got gem bank client"),T(a),r.next=13,oe(t,n);case 13:return i=r.sent,console.log("Got farm client"),_(i),console.log("Now fetching farm account"),r.next=19,i.fetchFarmAcc(new w.PublicKey(e));case 19:return o=r.sent,console.log("Got farm account"),l(o),console.log("About to fetch farmer account"),r.next=25,X(i,a);case 25:console.log("Finished the useEffect hook in useGemFarmStaking"),r.next=33;break;case 28:r.prev=28,r.t0=r.catch(1),l(null),d(null),console.error(r.t0);case 33:case"end":return r.stop()}}),r,null,[[1,28]])})))()}),[t,null===n||void 0===n?void 0:n.publicKey,e]),(0,i.useEffect)((function(){var e=function(){var e=fe(p().mark((function e(){var r,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(j&&f&&(null===f||void 0===f?void 0:f.identity)&&(null===n||void 0===n?void 0:n.publicKey))){e.next=17;break}return e.prev=1,console.log("[Staking Hook] Fetching farmer vault..."),e.next=5,j.fetchAllGdrPDAs(f.vault);case 5:return r=e.sent,a=r.map((function(e){return{mint:e.account.gemMint}})),e.next=9,K(a,t);case 9:i=e.sent,console.log(i),Z(i),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();j&&f&&(null===n||void 0===n?void 0:n.publicKey)&&e()}),[null===n||void 0===n?void 0:n.publicKey,j,f,e]);var H=function(){var e=fe(p().mark((function e(n,r,a){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return e.next=4,j.depositGemWallet(new w.PublicKey(u.bank),new w.PublicKey(f.vault),new v.BN(1),n,a,r);case 4:return i=e.sent.txSig,e.next=7,t.confirmTransaction(i);case 7:return console.log("[Staking Hook] deposit done",i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),V=function(){var e=fe(p().mark((function e(n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return e.next=4,j.withdrawGemWallet(u.bank,f.vault,new v.BN(1),n);case 4:return r=e.sent.txSig,e.next=7,t.confirmTransaction(r);case 7:return console.log("[Staking Hook] withdrawal done",r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=fe(p().mark((function e(){var t,n,r,a,i,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R&&j){e.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:G("Depositing Gems to the vault..."),t=!0,n=!1,r=void 0,e.prev=4,a=O[Symbol.iterator]();case 6:if(t=(i=a.next()).done){e.next=15;break}return c=i.value,l=new w.PublicKey((null===(u=c.onchainMetadata.data.creators)||void 0===u?void 0:u[0].address)||""),e.next=12,H(new w.PublicKey(c.onchainMetadata.mint),l,c.pubkey);case 12:t=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),n=!0,r=e.t0;case 21:e.prev=21,e.prev=22,t||null==a.return||a.return();case 24:if(e.prev=24,!n){e.next=27;break}throw r;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,X(R,j);case 31:return e.next=33,o();case 33:G(""),M([]),W([]);case 36:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=fe(p().mark((function e(){var t,n,r,a,i,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R&&j){e.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:G("Withdrawing Gems..."),t=!0,n=!1,r=void 0,e.prev=4,a=N[Symbol.iterator]();case 6:if(t=(i=a.next()).done){e.next=13;break}return c=i.value,e.next=10,V(new w.PublicKey(c.onchainMetadata.mint));case 10:t=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),n=!0,r=e.t0;case 19:e.prev=19,e.prev=20,t||null==a.return||a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw r;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,X(R,j);case 29:return e.next=31,o();case 31:G(""),M([]),W([]);case 34:case"end":return e.stop()}}),e,null,[[4,15,19,27],[20,,22,26]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var n=fe(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&j){n.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return G("Staking..."),n.next=5,R.stakeWallet(new w.PublicKey(e));case 5:return r=n.sent.txSig,n.next=8,t.confirmTransaction(r);case 8:return n.next=10,X(R,j);case 10:return n.next=12,o();case 12:G("");case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),q=function(){var n=fe(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&j){n.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return G("Unstaking wallet..."),n.next=5,R.unstakeWallet(new w.PublicKey(e));case 5:return r=n.sent.txSig,n.next=8,t.confirmTransaction(r);case 8:return n.next=10,X(R,j);case 10:G("");case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Q=function(){var n=fe(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&j){n.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return G("Claiming rewards..."),n.next=5,R.claimWallet(new w.PublicKey(e),new w.PublicKey(u.rewardA.rewardMint),new w.PublicKey(u.rewardB.rewardMint));case 5:return r=n.sent.txSig,n.next=8,t.confirmTransaction(r);case 8:return n.next=10,X(R,j);case 10:G("");case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),J=function(){var n=fe(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&j){n.next=2;break}throw new Error("No Gem Bank client has been initialized.");case 2:return G("Initializing farmer..."),n.next=5,R.initFarmerWallet(new w.PublicKey(e));case 5:return r=n.sent.txSig,n.next=8,t.confirmTransaction(r);case 8:return n.next=10,X(R,j);case 10:return n.next=12,o();case 12:G("");case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),ee=function(){var n=fe(p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&j&&f.identity){n.next=2;break}return n.abrupt("return",!0);case 2:return console.log("[Staking Hook] Refreshing farmer..."),G("Refreshing rewards..."),n.next=6,R.refreshFarmerWallet(new w.PublicKey(e),f.identity);case 6:return r=n.sent.txSig,n.next=9,t.confirmTransaction(r);case 9:return n.next=11,X(R,j);case 11:G("");case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),te=null===k||void 0===k?void 0:k.locked,ne=(null===f||void 0===f?void 0:f.rewardA)?f.rewardA.accruedReward.sub(f.rewardA.paidOutReward).toString():null;return{walletNFTs:a,farmerAccount:f,farmerVaultAccount:k,farmerStatus:b,selectedWalletItems:O,isLocked:te,availableA:ne,feedbackStatus:D,handleStakeButtonClick:$,handleUnstakeButtonClick:q,handleClaimButtonClick:Q,handleWalletItemClick:function(e){W((function(t){return t.find((function(t){return t.onchainMetadata.mint===e.onchainMetadata.mint}))?t.filter((function(t){return t.onchainMetadata.mint!==e.onchainMetadata.mint})):null===t||void 0===t?void 0:t.concat(e)}))},handleMoveToVaultButtonClick:U,handleInitStakingButtonClick:J,farmerVaultNFTs:C,selectedVaultItems:N,handleMoveToWalletButtonClick:Y,handleVaultItemClick:function(e){M((function(t){return t.find((function(t){return t.onchainMetadata.mint===e.onchainMetadata.mint}))?t.filter((function(t){return t.onchainMetadata.mint!==e.onchainMetadata.mint})):null===t||void 0===t?void 0:t.concat(e)}))},handleRefreshRewardsButtonClick:ee}},he=n(19723),me=n(41664),ve=n(18348),we=function(){var e=(0,m.Os)();return(0,r.tZ)(a.kC,{sx:{alignSelf:"stretch",justifyContent:"center",alignItems:"center",".wallet-adapter-dropdown":{display:"flex",justifyContent:"center"}},children:(0,r.tZ)(a.kC,{sx:{justifyContent:"center"},children:(null===e||void 0===e?void 0:e.publicKey)?(0,r.tZ)(ve.aD,{sx:{backgroundColor:"unset",transition:"all .3s linear",color:"heading",lineHeight:"body",fontSize:"1.4rem",padding:"0",height:"unset",alignSelf:"flex-end","&:hover":{background:"unset",backgroundImage:"unset!important",color:"primary",cursor:"pointer"}},startIcon:null,children:(0,r.tZ)(c,{sx:{transition:"all .125s linear","&:hover":{stroke:"primary"}}})}):(0,r.tZ)(ve.aD,{startIcon:null,sx:{backgroundColor:"unset",color:"heading",lineHeight:"body",fontSize:"1.4rem",padding:".8rem 1.6rem",height:"unset",alignSelf:"flex-end",display:"flex",background:function(e){var t;return null===(t=e.colors)||void 0===t?void 0:t.primaryGradient},border:".2rem solid transparent",transition:"all .125s linear",alignItems:"center",borderColor:"primary",opacity:1,fontWeight:500,"&:not(:disabled):hover":{bg:"background",cursor:"pointer",borderWidth:".2rem",opacity:.7},"&:disabled":{bg:"background",cursor:"not-allowed",opacity:.3}}})})})};function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}var ge=function(e){e.farmId,e.setFarmId;var t=(0,i.useState)(!1),n=t[0],o=t[1],c=(0,i.useState)(!1);c[0],c[1];return(0,r.tZ)(a.kC,{sx:{position:"sticky",top:0,zIndex:9,background:function(e){var t;return null===(t=e.colors)||void 0===t?void 0:t.backgroundGradient},borderBottom:"1px solid",borderColor:"background2"},children:(0,r.tZ)(a.W2,{children:(0,r.BX)(a.kC,{sx:{alignItems:"center",justifyContent:"space-between"},p:".8rem",children:[(0,r.tZ)(me.default,{href:"/",passHref:!0,children:(0,r.tZ)(a.kC,{as:"a",sx:{alignItems:"center",flexDirection:"column"},children:(0,r.BX)(a.kC,{sx:{alignItems:"center"},children:[(0,r.tZ)(a.xv,{as:"h1",variant:"headingSpecial",ml:".4rem",children:"GEM"}),(0,r.tZ)("img",{sx:{maxHeight:"4.8rem"},src:"/images/gemtransparent.gif",alt:"Gemworks"}),(0,r.tZ)(a.xv,{as:"h1",variant:"headingSpecial",ml:".4rem",children:"FARM+"}),(0,r.tZ)("img",{sx:{maxHeight:"4.8rem"},src:"/sb-round.png",alt:"Space Bums"})]})})}),(0,r.BX)(a.xv,{variant:"small",sx:{marginRight:"auto"},children:["\xa0\xa0\xa0\u2022\xa0","mainnet-beta"]}),(0,r.BX)(a.kC,{as:"nav",sx:be({gap:"1.6rem",display:"none",alignItems:"center"},n&&{display:"flex",position:"fixed",flexDirection:"column",alignItems:"center",top:"0",left:"0",width:"100vw",height:"100vh",padding:"1.6rem",transition:"opacity 0.125s cubic-bezier(0.175, 0.885, 0.32, 1.275),visibility 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)",backgroundColor:"background",zIndex:99,"& > a":{marginBottom:".8rem"},"&.active":{visibility:"visible",opacity:1}},{"@media (min-width: 768px)":{display:"flex",flexDirection:"row",width:"auto",height:"auto",padding:0,position:"relative"}}),children:[(0,r.tZ)(a.zx,{sx:be({alignSelf:"flex-end",padding:".8rem"},!n&&{display:"none"}),onClick:function(){return o(!1)},children:(0,r.tZ)(u,{})}),!1,!1,(0,r.tZ)(we,{})]}),(0,r.tZ)(a.zx,{sx:{padding:".8rem","@media(min-width: 768px)":{display:"none"}},onClick:function(){return o(!0)},children:(0,r.tZ)(l,{})})]})})})};function ye(){var e,t,n=(e=["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return ye=function(){return n},n}var ke=(0,n(70917).F4)(ye()),Be=function(e){var t=e.size,n=void 0===t?"2.4rem":t,a=e.className,i=void 0===a?"":a;return(0,r.BX)("svg",{width:n,height:n,sx:{stroke:"primary"},className:i,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[(0,r.tZ)("circle",{cx:"50",opacity:"0.4",cy:"50",fill:"none",strokeWidth:"14",r:"40"}),(0,r.tZ)("circle",{cx:"50",cy:"50",fill:"none",strokeWidth:"12",r:"40",strokeDasharray:"60 900",strokeLinecap:"round",transform:"rotate(25.6557 50 50)",sx:{animation:"".concat(ke," 1.5s infinite linear"),transformOrigin:"50px 50px"}})]})},Se=function(){var e=(0,i.useState)("Hf4pvc4xwXzBQjQVNGr3BdDe1Nfm3u7gRHF9gpsDWvoi"),t=e[0],n=e[1],o=pe(t),c=o.walletNFTs,u=o.farmerAccount,l=o.farmerVaultAccount,s=o.farmerStatus,d=o.selectedWalletItems,p=o.isLocked,h=o.availableA,v=o.feedbackStatus,w=o.handleStakeButtonClick,x=o.handleUnstakeButtonClick,b=o.handleClaimButtonClick,g=o.handleWalletItemClick,y=o.handleMoveToVaultButtonClick,k=o.farmerVaultNFTs,B=o.selectedVaultItems,S=o.handleMoveToWalletButtonClick,C=o.handleVaultItemClick,Z=o.handleInitStakingButtonClick,K=o.handleRefreshRewardsButtonClick,P=(0,m.Os)().publicKey;return(0,r.BX)(a.W2,{children:[(0,r.tZ)(ge,{farmId:t,setFarmId:n}),(0,r.BX)(a.kC,{sx:{flexDirection:"column",marginTop:"3.2rem",alignItems:"center",padding:"0 1.6rem"},children:[(0,r.BX)(a.X6,{children:["Your ",(0,r.tZ)("img",{src:"/sb-logo.png",style:{height:70,display:"inline-block",verticalAlign:"middle"}})," account"]}),(0,r.tZ)(a.xv,{children:"Below you can stake, unstake and collect rewards."}),P?t?u?u&&!(null===u||void 0===u?void 0:u.identity)?(0,r.tZ)(a.zx,{sx:{margin:"3.2rem 0"},onClick:Z,children:"Init staking account"}):(0,r.BX)(r.HY,{children:[(null===u||void 0===u?void 0:u.identity)?(0,r.BX)(r.HY,{children:[(0,r.BX)(a.kC,{sx:{flexDirection:"column",margin:"1.6rem 0"},children:[(0,r.BX)(a.kC,{sx:{gap:".4rem",alignItems:"center",justifyContent:"center"},children:[(0,r.tZ)("img",{sx:{maxHeight:"2.4rem"},src:"images/gemtransparent.gif"}),(0,r.BX)(a.xv,{children:["NFTs staked:\xa0",null===u||void 0===u?void 0:u.gemsStaked.toNumber()]})]}),(0,r.BX)(a.xv,{sx:{textAlign:"center"},children:["Vault state: ",(0,r.tZ)("b",{children:p?"locked":"unlocked"}),(0,r.tZ)("br",{})]}),(0,r.BX)(a.xv,{sx:{textAlign:"center"},children:["Account status: ",(0,r.tZ)("b",{children:s}),(0,r.tZ)("br",{})]})]}),(0,r.BX)(a.kC,{sx:{gap:"1.6rem",margin:"1.6rem 0",flexWrap:"wrap",alignItems:"center",alignSelf:"stretch",justifyContent:"center","@media (min-width: 768px":{flexDirection:"row"}},children:[(0,r.tZ)(a.zx,{onClick:w,disabled:!("unstaked"===s&&(null===k||void 0===k?void 0:k.length)),children:"Stake"}),(0,r.tZ)(a.zx,{onClick:x,disabled:!("staked"===s||"pendingCooldown"===s),children:"pendingCooldown"===s?"End cooldown":"Unstake"}),(0,r.BX)(a.zx,{onClick:b,disabled:!Number(h),children:["Claim"," ",(0,r.tZ)("img",{sx:{margin:"0 .4rem 0 .8rem",maxHeight:"2.4rem"},src:"images/icon-list-item.png"}),h?(0,r.tZ)("b",{children:(h/1e9).toFixed(2)}):0]}),(0,r.tZ)(a.zx,{onClick:K,children:"Refresh"})]}),(0,r.BX)(a.kC,{sx:{alignItems:"center",gap:".8rem",margin:".8rem 0"},children:[v?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Be,{size:"1.6rem"}),"  "," ",(0,r.tZ)(a.xv,{variant:"small",children:v})]}):"","\xa0"]})]}):null,(0,r.BX)(he.mQ,{sx:{margin:"3.2rem 0",alignSelf:"stretch",minHeight:"48rem"},children:[(0,r.BX)(he.td,{children:[(0,r.tZ)(he.OK,{children:"Your wallet"}),(0,r.tZ)(he.OK,{children:"Your vault"})]}),(0,r.tZ)(he.x4,{children:c?c.length?(0,r.BX)(a.kC,{sx:{flexDirection:"column",alignItems:"center"},children:[(0,r.tZ)("div",{sx:{display:"grid",gridTemplateColumns:c.length>1?"1fr 1fr":"1fr",gap:"1.6rem",alignItems:"center","@media (min-width: 768px)":{gridTemplateColumns:c.length>9?"1fr 1fr 1fr 1fr 1fr 1fr 1fr":c.length>4?"1fr 1fr 1fr 1fr 1fr":c.map((function(){return"1fr"})).join(" ")}},children:c.map((function(e){var t=d.find((function(t){return t.onchainMetadata.mint===e.onchainMetadata.mint}));return(0,r.tZ)(f,{item:e,onClick:g,sx:{maxWidth:"16rem","> img":{border:"3px solid transparent",borderColor:t?"primary":"transparent"}}},e.onchainMetadata.mint)}))}),c.length?(0,r.tZ)(a.xv,{sx:{margin:"3.2rem 0 .8rem 0"},variant:"small",children:p?"Unlock your vault to stake your NFTs.":"Select NFTs to move them to your Vault."}):null,d&&d.length?(0,r.tZ)(a.zx,{disabled:p,onClick:y,children:"Deposit selected"}):null]}):(0,r.tZ)(a.kC,{sx:{justifyContent:"center",alignSelf:"stretch"},children:(0,r.tZ)(a.xv,{children:"There are no NFTs on your wallet."})}):P?(0,r.tZ)(a.kC,{sx:{justifyContent:"center",alignSelf:"stretch"},children:(0,r.tZ)(a.$j,{variant:"styles.spinnerLarge"})}):null}),(0,r.tZ)(he.x4,{children:l?(0,r.tZ)(r.HY,{children:k?k.length?(0,r.BX)(a.kC,{sx:{flexDirection:"column",justifyContent:"center",alignSelf:"stretch",alignItems:"center"},children:[(0,r.tZ)("div",{sx:{display:"grid",gridTemplateColumns:k.length>1?"1fr 1fr":"1fr",gap:"1.6rem","@media (min-width: 768px)":{gridTemplateColumns:k.length>9?"1fr 1fr 1fr 1fr 1fr 1fr 1fr":k.length>4?"1fr 1fr 1fr 1fr 1fr":k.map((function(){return"1fr"})).join(" ")}},children:k.map((function(e){var t=B.find((function(t){return t.onchainMetadata.mint===e.onchainMetadata.mint}));return(0,r.tZ)(f,{item:e,onClick:C,sx:{maxWidth:"16rem","> img":{border:"3px solid transparent",borderColor:t?"primary":"transparent"}}},e.onchainMetadata.mint)}))}),(0,r.tZ)(a.xv,{sx:{margin:"3.2rem 0 .8rem 0"},variant:"small",children:p?"Unlock your vault to withdraw your NFTs.":"Select NFTs to withdraw them to your wallet."}),B&&B.length?(0,r.tZ)(r.HY,{children:(0,r.tZ)(a.zx,{disabled:p,onClick:S,children:"Withdraw selected"})}):null]}):(0,r.tZ)(a.kC,{sx:{justifyContent:"center",alignSelf:"stretch"},children:(0,r.tZ)(a.xv,{children:"There are no NFTs on your vault."})}):P?(0,r.tZ)(a.kC,{sx:{justifyContent:"center",alignSelf:"stretch"},children:(0,r.tZ)(a.$j,{variant:"styles.spinnerLarge"})}):null}):null})]})]}):(0,r.tZ)(Be,{size:"3.2rem",sx:{margin:"3.2rem 0"}}):(0,r.tZ)(a.xv,{mt:"1.6rem",children:"Farm ID is not configured."}):(0,r.tZ)(a.xv,{sx:{textAlign:"center",margin:"3.2rem 0"},children:"Connect your wallet first."})]})]})}},46601:function(){},89214:function(){},85568:function(){},55024:function(){}},function(e){e.O(0,[766,655,870,314,145,993,774,888,179],(function(){return t=45301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);